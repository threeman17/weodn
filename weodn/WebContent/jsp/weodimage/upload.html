
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Hydrogen &mdash; A free HTML5 Template </title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
	<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
	<meta name="author" content="FREEHTML5.CO" />

  <!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<!--<link rel="shortcut icon" href="favicon.ico">-->

	<!-- Google Webfonts -->
	<!--<link href='http://fonts.useso.com/css?family=Roboto:400,300,100,500' rel='stylesheet' type='text/css'>-->
	<!--<link href='http://fonts.useso.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">
	<!-- Salvattore -->
	<link rel="stylesheet" href="css/salvattore.css">
	<!-- Theme Style -->
	<link rel="stylesheet" href="css/style.css">
	
	<link rel="stylesheet" type="text/css" href="css/fileinput.min.css"/>
	
	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	
	</head>
	<body>
		
	<div id="fh5co-offcanvass">
		<a href="#" class="fh5co-offcanvass-close js-fh5co-offcanvass-close">关闭 <i class="icon-cross"></i> </a>
		<h1 class="fh5co-logo"><a class="navbar-brand" href="index.html">用户</a></h1>
		<ul>
			<li><a href="index.html">首页</a></li>
			<li><a href="myUpload.html">我的上传</a></li>
			<li class="active"><a href="upload.html">上传壁纸</a></li>
			<li><a href="pricing.html">我的收藏</a></li>
		</ul>
		<h3 class="fh5co-lead">Connect with us</h3>
		<p class="fh5co-social-icons">
			<a href="#"><i class="icon-twitter"></i></a>
			<a href="#"><i class="icon-facebook"></i></a>
			<a href="#"><i class="icon-instagram"></i></a>
			<a href="#"><i class="icon-dribbble"></i></a>
			<a href="#"><i class="icon-youtube"></i></a>
		</p>
	</div>
	<div style="position: fixed; right: 10px; top: 10px;z-index: 87;">
		<a href="#" class="fh5co-menu-btn js-fh5co-menu-btn" >INFO <i class="icon-menu"></i></a>
	</div>
	<!-- END .header -->
	
	
	<div id="fh5co-main">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<h2>上传壁纸</h2>
					<div class="fh5co-spacer fh5co-spacer-sm"></div>
					<form action="#">
						<div class="row">
							<!--<div class="col-md-6">
								<div class="form-group">
									<input type="text" class="form-control" placeholder="First Name">	
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
									<input type="text" class="form-control" placeholder="Last Name">
								</div>
							</div>-->
							<div class="col-md-12">
								<div class="form-group">
									<input type="email" class="form-control" placeholder="壁纸标题">
								</div>
								<!--<div class="form-group">
									<textarea name="message" id="message" cols="30" class="form-control" rows="10"></textarea>
								</div>-->
								
								<input id="file-pic" name="pictureFile" type="file" multiple>
								<div class="form-group" style="margin-top: 30px;">
									<input type="submit" class="btn btn-primary" value="上传图片" id="uploadBtn">
								</div>
							</div>
						</div>
					</form>
					
				</div>
        		
        	</div>
       </div>
	</div>


	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<!-- Salvattore -->
	<script src="js/salvattore.min.js"></script>
	<!-- Main JS -->
	<script src="js/main.js"></script>

	<script src="js/fileinput.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/zh.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$('#file-pic').fileinput({//初始化上传文件框
        showUpload : false,
        showRemove : false,
        uploadAsync: true,
        uploadLabel: "上传",//设置上传按钮的汉字
        uploadClass: "btn btn-primary",//设置上传按钮样式
        showCaption: false,//是否显示标题
        language: "zh",//配置语言
        uploadUrl: "http://localhost:8080/weodimage/uploadImage.action?"+"title=45455454",
        maxFileSize : 0,
        maxFileCount: 1,/*允许最大上传数，可以多个，当前设置单个*/
        enctype: 'multipart/form-data',
        //allowedPreviewTypes : [ 'image' ], //allowedFileTypes: ['image', 'video', 'flash'],
        allowedFileExtensions : ["jpg", "png","gif"],/*上传文件格式*/
        msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
        dropZoneTitle: "请通过拖拽图片文件放到这里", 
        dropZoneClickTitle: "或者点击此区域添加图片",
        //uploadExtraData: {"id": id},//这个是外带数据
        showBrowse: false,
        browseOnZoneClick: true,
        slugCallback : function(filename) {
            return filename.replace('(', '_').replace(']', '_');
        }
    });
	    //上传文件成功，回调函数 
	    $('#file-pic').on("fileuploaded", function(event, data, previewId, index) {
	    var result = data.response; //后台返回的json
	    //console.log(result.status);
	    //console.log(result.id);
	    $('#picid').val(result.id);//拿到后台传回来的id，给图片的id赋值序列化表单用
	    //如果是上传多张图
	    /*
	    //计数标记，用于确保全部图片都上传成功了，再提交表单信息
	    var fileCount = $('#file-pic').fileinput('getFilesCount');
	    if(fileCount==1){
	    $.ajax({//上传文件成功后再保存图片信息
	        url:'BannerPicAction!savaForm.action',
	        data:$('#form1').serialize(),//form表单的值
	        success:function(data,status){
	            ...
	        },
	        cache:false,                    //不缓存
	    });
	    }
	    */
	  	alert("上传成功");
	    });
	
	    $('#uploadBtn').on('click',function (){// 提交图片信息 //
	        //先上传文件，然后在回调函数提交表单
	        $('#file-pic').fileinput('upload');
	
	    }); 
	</script>

	
	</body>
</html>
